\documentclass{beamer}
\usepackage[english]{babel}
\usetheme{CambridgeUS}

\usepackage{caption}
\captionsetup{tableposition=top,figureposition=bottom,font=small}
\usepackage{graphicx}
\usepackage{subfig}
\usepackage{grffile}
\usepackage{booktabs}
\usepackage[absolute,overlay]{textpos}

\setbeamertemplate{navigation symbols}{}

\title[]{Screen Space Ambient Occlusion \\\small A WebGL-three.js implementation}

\newsavebox{\authbox}
\sbox{\authbox}{
    \centering
    \begin{minipage}{0.45\linewidth}
        \centering\normalsize
        Ivan Prosperi
    \end{minipage}
}


\author[Ivan Prosperi]{
    \usebox{\authbox}}
\institute[]{Universit\`a degli Studi di Firenze}
\date{}
\logo{\textcolor{black}{\includegraphics[width=0.10\textwidth]{images/logo_unifi/stemma_grigio.pdf}}}


\AtBeginSection{%
    \begin{frame}
    \tableofcontents[currentsection, subsectionstyle=show/show/hide]
\end{frame}
}

\begin{document}

\begin{frame}
    \titlepage
    \centering
    Computer Graphics \& 3D Project Report
\end{frame}

\begin{frame}
    \frametitle{Table of contents}
    \tableofcontents
\end{frame}

% ##################### START #####################
\section{Introduction}

\subsection{Ambient Occlusion}

\begin{frame}
\frametitle{Ambient Occlusion}
% cosa è, immagini con/senza ao
Ambient occlusion is a shading technique computes the degree of exposure to ambient light in a 3D scene:
\begin{itemize}
    \item open surfaces, planar geometries, ``floating'' geometries: fully exposed to ambient light
    \item corners, hidden geometries, tight gaps between objects, creases: appear shaded in real life, ambient light does not reach them at full intensity
\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Ambient Occlusion Effects}
\begin{figure}
    \centering
    \includegraphics[width=0.8\linewidth]{images/B-25_raw.png}
    \caption{3D object with raw material.\footnotemark}
    %    \label{fig:b25_raw}
\end{figure}

\vspace*{-8px}
\footnotetext[1]{\tiny Landis, H. Production-Ready Global Illumination (2004).}
\end{frame}

\begin{frame}
\frametitle{Ambient Occlusion Effects}
\begin{figure}
    \centering
    \includegraphics[width=0.8\linewidth]{images/B-25_ao.png}
    \caption{The same object with ambient occlusion applied.}
%    \label{fig:b25_ao}
\end{figure}

\end{frame}

\begin{frame}[allowframebreaks]
\frametitle{Global Illumination}
% cosa è, immagini indirect light + AO vera + citazione paper AO
% Dire che ao vera è fatta con indirect lighting di GI ma troppo
% costoso in caso di real time
\textbf{Global Illumination (GI)}:
\begin{itemize}
    \item \emph{considers} physically correct light phenomena
    \item \emph{is} a \underline{global method}: illumination at each point is a function of other geometry in the scene
    \item \emph{accounts} for light rays (possibly infinite) bounces
    \item \emph{implements} indirect illumination
    \item \emph{comprises} reflection, refraction, shadows, diffuse inter-reflections, caustics, etc
\end{itemize}

Ambient occlusion approximates some aspects of Global Illumination.

%\end{frame}
\framebreak
%\begin{frame}
%\frametitle{Global Illumination II}
\begin{figure}
    \centering
    \includegraphics[width=0.9\linewidth]{images/gi_room.jpg}
\end{figure}
%\end{frame}
\framebreak
%\begin{frame}
%\frametitle{Global Illumination III}
Global illumination limits:
\begin{itemize}
    \item a pixel color value depends on the entire scene
    \item light calculation involves solving complex equations
    \item no algorithm exists to implement GI as a whole
\end{itemize}

Furthermore, current real-time graphics hardware is mostly based on rasterization $ \Rightarrow $ ideal for direct illumination computation.

Therefore, \textbf{GI is not reproducible in real time rendering} with the current technologies and hardware.
\end{frame}

\subsection{GI Approximations}
\begin{frame}[allowframebreaks]
\frametitle{Multipass Rendering}
% Far vedere esempio di multipass rendering
% Scrivere tipo "used for shadow mapping, normal mapping, etc"
Multipass rendering (and deferred shading) are employed as low-cost approximations for GI effects:
\begin{itemize}
    \item shadow mapping
    \item soft shadows
    \item reflection mapping
    \item light mapping
    \item \textbf{ambient occlusion}
\end{itemize}

\begin{figure}
    \centering
    \includegraphics[width=0.9\linewidth]{images/reflection_map.jpg}
\end{figure}

\end{frame}


\section{Screen Space Ambient Occlusion}

\subsection{Principles}

\begin{frame}
\frametitle{Screen Space Ambient Occlusion}
% crytek-crysis 2007
Screen Space Ambient Occlusion (SSAO):
\begin{itemize}
    \item first approach to real time AO
    \item developed at \emph{Crytek GmbH} and included in \emph{CryEngine 2}
    \item used in \emph{Crysis} (2007)
\end{itemize}

\begin{columns}
    \begin{column}{0.4\linewidth}
        \begin{figure}
        \centering
        \subfloat{\includegraphics[width=0.5\linewidth]{images/crytek_logo.pdf}} \\
        \subfloat{\includegraphics[width=0.8\linewidth]{images/cryengine_logo.pdf}}
        \end{figure}
    \end{column}

    \begin{column}{0.4\linewidth}
        \begin{figure}
        \centering
        \includegraphics[width=\linewidth]{images/crysis_cover.png}
        \end{figure}
    \end{column}
\end{columns}

\end{frame}

\begin{frame}[allowframebreaks]
\frametitle{SSAO in Crysis}
% mettere immagine crysis coreano + tank + muro dietro
\begin{figure}
    \centering
    \includegraphics[width=0.8\linewidth]{images/ssao_crysis_gameplay.png}
\end{figure}

\begin{figure}
    \centering
    \includegraphics[width=0.8\linewidth]{images/ssao_tank.jpg}
\end{figure}

\end{frame}

\begin{frame}
\frametitle{Screen Space}
SSAO is a \emph{screen space} technique:
\begin{itemize}
    \item bla
\end{itemize}
\end{frame}

\begin{frame}
% Scrivere principio base. Cioè usare posizione view per calcolare occlusione punto
% Siccome in rasterization engines non abbiamo dati su geometria sourrounding, dobbiamo
% usare trovare modo di avere questa info. => soluzione: scene's depth in screen-space
\end{frame}

\subsection{Implementation Details}
% scrivere che si usa deferred rendering, scrivere tutti i gbuffer che si usano, ..

% Qui metto tutte subsub con le tecniche che ho usato: tipo range check, min/max distance,.. No view space reconstruction. Quella ha subsection dedicata
\subsubsection{Range Check}
\subsubsection{Distance Constraints}

% FIXME: forse usare dei frame più che delle subsubsection per la roba sopra

\subsection{View Space Reconstruction}

\section{Results}

\begin{frame}
\frametitle{App: SSAO layer}
\begin{figure}
    \centering
    \includegraphics[width=0.95\linewidth]{images/app_ssao}
\end{figure}

\end{frame}



\section{Tools and Software}
% threejs webgl buildpack node/npm heroku eslint

\section{Conclusions}
% future work: depth-aware blur

\section{?Problems? (Insert somewhere)}
% halo effect on object
% problem in calibrating parameters as every other paremetric techinques
% highly dependent on scale of the scene
% corrections help with results but give even more parameters

% ##################### END #####################

\end{document}